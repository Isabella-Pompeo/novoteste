<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mapa com Zoom</title>
  <style>
    #fairMapCanvas {
      width: 800px;
      height: 600px;
      border: 1px solid #000;
      display: block;
      margin: 20px auto;
      cursor: zoom-in;
    }
  </style>
</head>
<body>

<canvas id="fairMapCanvas"></canvas>

<script>
  const canvas = document.getElementById('fairMapCanvas');
  const ctx = canvas.getContext('2d');

  const dpr = window.devicePixelRatio || 1;
  const cssWidth = 800;
  const cssHeight = 600;

  canvas.width = cssWidth * dpr;
  canvas.height = cssHeight * dpr;
  canvas.style.width = cssWidth + 'px';
  canvas.style.height = cssHeight + 'px';
  ctx.scale(dpr, dpr);

  const img = new Image();
  img.src = 'assets/mapa-planta.png';

  // Estado de zoom
  let zoom = 1;
  let offsetX = 0;
  let offsetY = 0;

  img.onload = () => {
    draw();
  };

  function draw() {
    ctx.clearRect(0, 0, cssWidth, cssHeight);
    ctx.save();
    ctx.translate(offsetX, offsetY);
    ctx.scale(zoom, zoom);
    ctx.drawImage(img, 0, 0, cssWidth, cssHeight);
    ctx.restore();
  }

  canvas.addEventListener('click', e => {
    const rect = canvas.getBoundingClientRect();
    const clickX = (e.clientX - rect.left) / (zoom);
    const clickY = (e.clientY - rect.top) / (zoom);

    zoom *= 1.5;
    offsetX = (offsetX - clickX * 0.5);
    offsetY = (offsetY - clickY * 0.5);
    draw();
  });

  canvas.addEventListener('contextmenu', e => {
    e.preventDefault(); // bloqueia o menu do bot√£o direito
    const rect = canvas.getBoundingClientRect();
    const clickX = (e.clientX - rect.left) / (zoom);
    const clickY = (e.clientY - rect.top) / (zoom);

    zoom /= 1.5;
    offsetX = (offsetX + clickX * 0.5);
    offsetY = (offsetY + clickY * 0.5);
    draw();
  });
</script>

</body>
</html>
